{"version":3,"file":"author-datalist.es5.js","sources":["../src/element.js"],"sourcesContent":["class AuthorDatalistElement extends AuthorElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.clickCount = 0\n\n    this.PRIVATE.addReadOnlyProperty('options')\n\n    this.PRIVATE.options = []\n\n    this.PRIVATE.find = query => {\n      return this.PRIVATE.options.filter(option => {\n        let value = this.hasAttribute('case-sensitive') ? option.sourceElement.value : option.sourceElement.value.toLowerCase()\n        let text = this.hasAttribute('case-sensitive') ? option.sourceElement.text : option.sourceElement.text.toLowerCase()\n        query = this.hasAttribute('case-sensitive') ? query : query.toLowerCase()\n\n        return value.indexOf(query) >= 0 || text.indexOf(query) >= 0\n      })\n    }\n\n    this.PRIVATE.clear = () => {\n      this.PRIVATE.options.forEach(option => option.displayElement.style.display = 'none')\n    }\n\n    this.PRIVATE.showAllOptions = () => {\n      this.PRIVATE.options.forEach(option => option.displayElement.style.display = '')\n    }\n\n    this.PRIVATE.clickHandler = evt => {\n      this.clickCount++\n\n      if (this.clickCount === 2) {\n        this.PRIVATE.showAllOptions()\n        this.open()\n      }\n    }\n\n    this.PRIVATE.keydownHandler = evt => {\n      if (!this.isOpen) {\n        this.PRIVATE.showAllOptions()\n        return this.open()\n      }\n\n      switch (evt[this.keySource]) {\n        case 27:\n        case 'Escape':\n          this.PRIVATE.clear()\n          this.close()\n          break\n\n        case 38:\n        case 'ArrowUp':\n          evt.preventDefault()\n          console.log('select previous option');\n          break\n\n        case 40:\n        case 'ArrowDown':\n          evt.preventDefault()\n          console.log('select next option');\n          break\n\n        default:\n          return\n      }\n    }\n\n    this.PRIVATE.inputHandler = evt => {\n      this.PRIVATE.clear()\n      let query = this.PRIVATE.inputEl.value\n\n      if (!query) {\n        return\n      }\n\n      let results = this.PRIVATE.find(query)\n\n      if (results.length) {\n        results.forEach(result => result.displayElement.style.display = '')\n        this.setAttribute('open', '')\n        return\n      }\n\n      if (this.hasAttribute('open')) {\n        this.removeAttribute('open')\n      }\n\n      this.PRIVATE.clear()\n    }\n\n    this.PRIVATE.bodyClickHandler = evt => {\n      if (evt.target === this || this.contains(evt.target)) {\n        return\n      }\n\n      this.removeAttribute('open')\n    }\n\n    this.PRIVATE.getOptionById = (id) => {\n      let options = this.PRIVATE.options\n      let option\n\n      for (let i = 0; i < options.length; i++) {\n        if (options[i].id === id) {\n          option = options[i]\n          break\n        }\n      }\n\n      return option\n    }\n\n    this.PRIVATE.generateOptionObject = optionEl => {\n      if (!customElements.get('chassis-option')) {\n        console.error(`chassis-datalist requires chassis-option. Please include it in this document's <head> element.`)\n        return\n      }\n\n      let obj = {\n        id: this.PRIVATE.generateGuid('option'),\n        attributes: {},\n        sourceElement: optionEl\n      }\n\n      for (let attr of optionEl.attributes) {\n        obj.attributes[attr.name] = attr.value\n      }\n\n      return obj\n    }\n  }\n\n  static get observedAttributes () {\n    return ['autofocus', 'case-sensitive', 'disabled', 'name', 'open', 'tabindex']\n  }\n\n  get isOpen () {\n    return this.hasAttribute('open')\n  }\n\n  set isOpen (bool) {\n    bool ? this.setAttribute('open', '') : this.removeAttribute('open')\n  }\n\n  get value () {\n    return this.PRIVATE.inputEl.value\n  }\n\n  connectedCallback () {\n    this.PRIVATE.inputEl.addEventListener('focus', evt => {\n      this.addEventListener('keydown', this.PRIVATE.keydownHandler)\n    })\n\n    this.PRIVATE.inputEl.addEventListener('input', this.PRIVATE.inputHandler)\n\n    this.PRIVATE.inputEl.addEventListener('click', this.PRIVATE.clickHandler)\n\n    this.PRIVATE.inputEl.addEventListener('blur', evt => {\n      this.clickCount = 0\n      this.removeEventListener('keydown', this.PRIVATE.keydownHandler)\n    })\n\n    setTimeout(() => {\n      if (!this.hasAttribute('tabindex')) {\n        this.setAttribute('tabindex', 0)\n      }\n\n      if (this.autofocus) {\n        this.focus()\n      }\n    }, 0)\n  }\n\n  addChildren (children) {\n    for (let child of children) {\n      this.addOption(child instanceof HTMLElement ? this.PRIVATE.generateOptionObject(child) : child)\n    }\n  }\n\n  addOption (option, index, dest = this.PRIVATE.optionsEl) {\n    if (!customElements.get('chassis-option')) {\n      console.error(`chassis-datalist requires chassis-option. Please include it in this document's <head> element.`)\n      return\n    }\n\n    if (!option.hasOwnProperty('id')) {\n      option.id = this.PRIVATE.generateGuid('option')\n    }\n\n    if (!option.hasOwnProperty('sourceElement') || !(option.sourceElement instanceof HTMLElement)) {\n      let sourceEl = document.createElement('option')\n\n      if (option.hasOwnProperty('innerHTML')) {\n        sourceEl.innerHTML = option.innerHTML\n      }\n\n      if (option.hasOwnProperty('label')) {\n        sourceEl.innerHTML = option.label\n      }\n\n      if (option.hasOwnProperty('value')) {\n        sourceEl.value = option.value\n      }\n\n      if (option.hasOwnProperty('disabled')) {\n        sourceEl.disabled = typeof option.disabled === 'boolean' && option.disabled\n      }\n\n      option.sourceElement = sourceEl\n    }\n\n    let label = option.sourceElement.getAttribute('label') || option.sourceElement.textContent.trim()\n    let value = option.sourceElement.getAttribute('value')\n    let disabled = option.sourceElement.disabled\n    let chassisOption = document.createElement('chassis-option')\n\n    chassisOption.style.display = 'none'\n    chassisOption.key = option.id\n    chassisOption.innerHTML = option.sourceElement.innerHTML\n\n    dest.appendChild(chassisOption)\n    chassisOption.addEventListener('click', evt => this.select(chassisOption.key))\n\n    option = {\n      attributes: { disabled, label, value },\n      id: option.id,\n      displayElement: chassisOption,\n      sourceElement: option.sourceElement\n    }\n\n    if (index) {\n      this[`${index}`] = option.sourceElement\n      this.PRIVATE.options.splice(index, 0, option)\n      return\n    }\n\n    this[`${this.PRIVATE.options.length}`] = option.sourceElement\n    this.PRIVATE.options.push(option)\n  }\n\n  attributeChangedCallback (attr, oldValue, newValue) {\n    attr = attr.toLowerCase()\n\n    if (newValue === oldValue) {\n      return\n    }\n\n    switch (attr) {\n      case 'autofocus':\n      case 'disabled':\n        console.log(attr);\n        // this.PRIVATE.setBooleanAttributeValue(attr, newValue)\n        break\n\n      case 'name':\n        console.log(attr);\n        // this.PRIVATE.setAttributeValue(attr, newValue)\n        break\n\n      case 'open':\n        this.isOpen ? this.open() : this.close()\n        break\n    }\n  }\n\n  close () {\n    document.body.removeEventListener('click', this.PRIVATE.bodyClickHandler)\n    document.body.removeEventListener('touchcancel', this.PRIVATE.bodyClickHandler)\n    document.body.removeEventListener('touchend', this.PRIVATE.bodyClickHandler)\n\n    if (this.isOpen) {\n      this.isOpen = false\n    }\n  }\n\n  open () {\n    document.body.addEventListener('click', this.PRIVATE.bodyClickHandler)\n    document.body.addEventListener('touchcancel', this.PRIVATE.bodyClickHandler)\n    document.body.addEventListener('touchend', this.PRIVATE.bodyClickHandler)\n\n    if (!this.isOpen) {\n      this.isOpen = true\n    }\n  }\n\n  inject (input, datalist, guid) {\n    this.PRIVATE.sourceEl = datalist\n    this.PRIVATE.inputEl = input\n    this.PRIVATE.inputEl.slot = 'input'\n    this.PRIVATE.inputEl.id = guid\n    this.appendChild(this.PRIVATE.inputEl)\n\n    this.PRIVATE.optionsEl = document.createElement('chassis-options')\n    this.PRIVATE.optionsEl.slot = 'options'\n\n    this.appendChild(this.PRIVATE.optionsEl)\n\n    this.addChildren(datalist.options)\n  }\n\n  select (id) {\n    let option = this.PRIVATE.getOptionById(id)\n\n    if (option) {\n      option.sourceElement.selected = true\n      this.PRIVATE.inputEl.value = option.displayElement.innerHTML\n      this.PRIVATE.selectedOption = option\n\n      this.PRIVATE.options.forEach(option => option.displayElement.removeAttribute('selected'))\n      option.displayElement.setAttribute('selected', '')\n\n      this.dispatchEvent(new Event('input', {\n        bubbles: true\n      }))\n\n      this.close()\n    }\n  }\n}\n\ncustomElements.define('chassis-datalist', AuthorDatalistElement)\n"],"names":["AuthorDatalistElement","clickCount","PRIVATE","addReadOnlyProperty","options","find","query","filter","option","value","hasAttribute","sourceElement","toLowerCase","text","indexOf","clear","forEach","displayElement","style","display","showAllOptions","clickHandler","evt","open","keydownHandler","isOpen","keySource","close","preventDefault","console","log","inputHandler","inputEl","results","length","result","setAttribute","removeAttribute","bodyClickHandler","target","contains","getOptionById","id","i","generateOptionObject","optionEl","customElements","get","error","obj","generateGuid","attributes","attr","name","addEventListener","removeEventListener","setTimeout","autofocus","focus","children","child","addOption","HTMLElement","index","dest","optionsEl","hasOwnProperty","sourceEl","document","createElement","innerHTML","label","disabled","getAttribute","textContent","trim","chassisOption","key","appendChild","select","splice","push","oldValue","newValue","body","input","datalist","guid","slot","addChildren","selected","selectedOption","dispatchEvent","Event","bubbles","bool","AuthorElement","define"],"mappings":"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"}
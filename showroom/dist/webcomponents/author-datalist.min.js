!function(){"use strict";window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <chassis-datalist> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/datalist")),function(){let e=Array.from(new Set(["author-selected-options","author-options","author-option"])).filter(e=>!customElements.get(e));e.length>0&&(console.error(`[ERROR] <chassis-datalist> Required dependenc${1!==e.length?"ies":"y"} not found: ${e.map(e=>`<${e}>`).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1])}`),e.forEach((e,t)=>console.info(`${t+1}. <${e}> is available at ${"https://github.com/author-elements/datalist".replace("chassis-datalist",e.replace("author-",""))}`)))}();customElements.define("chassis-datalist",class extends(AuthorElement(HTMLElement)){constructor(){super('<template><style>@charset "UTF-8"; :host{display:inline-flex;max-width:100%}:host *,:host :after,:host :before{box-sizing:border-box}:host ::slotted(author-options){height:0;overflow:hidden}:host([open]) ::slotted(author-options){height:auto}chassis-datalist{display:inline-flex;max-width:100%}chassis-datalist *,chassis-datalist :after,chassis-datalist :before{box-sizing:border-box}chassis-datalist author-options{height:0;overflow:hidden}chassis-datalist[open] author-options{height:auto}</style><slot name="afterbegin"></slot><slot name="beforeinput"></slot><slot name="input"></slot><slot name="afterinput"></slot><slot name="beforeselectedoptions"></slot><slot name="selectedoptions"></slot><slot name="afterselectedoptions"></slot><slot name="beforeoptions"></slot><slot name="options"></slot><slot name="afteroptions"></slot><slot name="beforeend"></slot></template>'),this.clickCount=0,this.PRIVATE.addReadOnlyProperty("options"),this.PRIVATE.options=[],this.PRIVATE.find=(e=>this.PRIVATE.options.filter(t=>{let s=this.hasAttribute("case-sensitive")?t.sourceElement.value:t.sourceElement.value.toLowerCase(),i=this.hasAttribute("case-sensitive")?t.sourceElement.text:t.sourceElement.text.toLowerCase();return e=this.hasAttribute("case-sensitive")?e:e.toLowerCase(),s.indexOf(e)>=0||i.indexOf(e)>=0})),this.PRIVATE.clear=(()=>{this.PRIVATE.options.forEach(e=>e.displayElement.style.display="none")}),this.PRIVATE.showAllOptions=(()=>{this.PRIVATE.options.forEach(e=>e.displayElement.style.display="")}),this.PRIVATE.clickHandler=(e=>{this.clickCount++,2===this.clickCount&&(this.PRIVATE.showAllOptions(),this.open())}),this.PRIVATE.keydownHandler=(e=>{if(!this.isOpen)return this.PRIVATE.showAllOptions(),this.open();switch(e[this.keySource]){case 27:case"Escape":this.PRIVATE.clear(),this.close();break;case 38:case"ArrowUp":e.preventDefault(),console.log("select previous option");break;case 40:case"ArrowDown":e.preventDefault(),console.log("select next option");break;default:return}}),this.PRIVATE.inputHandler=(e=>{this.PRIVATE.clear();let t=this.PRIVATE.inputEl.value;if(!t)return;let s=this.PRIVATE.find(t);if(s.length)return s.forEach(e=>e.displayElement.style.display=""),void this.setAttribute("open","");this.hasAttribute("open")&&this.removeAttribute("open"),this.PRIVATE.clear()}),this.PRIVATE.bodyClickHandler=(e=>{e.target===this||this.contains(e.target)||this.removeAttribute("open")}),this.PRIVATE.getOptionById=(e=>{let t,s=this.PRIVATE.options;for(let i=0;i<s.length;i++)if(s[i].id===e){t=s[i];break}return t}),this.PRIVATE.generateOptionObject=(e=>{if(!customElements.get("chassis-option"))return void console.error("chassis-datalist requires chassis-option. Please include it in this document's <head> element.");let t={id:this.PRIVATE.generateGuid("option"),attributes:{},sourceElement:e};for(let s of e.attributes)t.attributes[s.name]=s.value;return t})}static get observedAttributes(){return["autofocus","case-sensitive","disabled","name","open","tabindex"]}get isOpen(){return this.hasAttribute("open")}set isOpen(e){e?this.setAttribute("open",""):this.removeAttribute("open")}get value(){return this.PRIVATE.inputEl.value}connectedCallback(){this.PRIVATE.inputEl.addEventListener("focus",e=>{this.addEventListener("keydown",this.PRIVATE.keydownHandler)}),this.PRIVATE.inputEl.addEventListener("input",this.PRIVATE.inputHandler),this.PRIVATE.inputEl.addEventListener("click",this.PRIVATE.clickHandler),this.PRIVATE.inputEl.addEventListener("blur",e=>{this.clickCount=0,this.removeEventListener("keydown",this.PRIVATE.keydownHandler)}),setTimeout(()=>{this.hasAttribute("tabindex")||this.setAttribute("tabindex",0),this.autofocus&&this.focus()},0)}addChildren(e){for(let t of e)this.addOption(t instanceof HTMLElement?this.PRIVATE.generateOptionObject(t):t)}addOption(e,t,s=this.PRIVATE.optionsEl){if(!customElements.get("chassis-option"))return void console.error("chassis-datalist requires chassis-option. Please include it in this document's <head> element.");if(e.hasOwnProperty("id")||(e.id=this.PRIVATE.generateGuid("option")),!(e.hasOwnProperty("sourceElement")&&e.sourceElement instanceof HTMLElement)){let t=document.createElement("option");e.hasOwnProperty("innerHTML")&&(t.innerHTML=e.innerHTML),e.hasOwnProperty("label")&&(t.innerHTML=e.label),e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty("disabled")&&(t.disabled="boolean"==typeof e.disabled&&e.disabled),e.sourceElement=t}let i=e.sourceElement.getAttribute("label")||e.sourceElement.textContent.trim(),n=e.sourceElement.getAttribute("value"),o=e.sourceElement.disabled,l=document.createElement("chassis-option");if(l.style.display="none",l.key=e.id,l.innerHTML=e.sourceElement.innerHTML,s.appendChild(l),l.addEventListener("click",e=>this.select(l.key)),e={attributes:{disabled:o,label:i,value:n},id:e.id,displayElement:l,sourceElement:e.sourceElement},t)return this[`${t}`]=e.sourceElement,void this.PRIVATE.options.splice(t,0,e);this[`${this.PRIVATE.options.length}`]=e.sourceElement,this.PRIVATE.options.push(e)}attributeChangedCallback(e,t,s){if(e=e.toLowerCase(),s!==t)switch(e){case"autofocus":case"disabled":case"name":console.log(e);break;case"open":this.isOpen?this.open():this.close()}}close(){document.body.removeEventListener("click",this.PRIVATE.bodyClickHandler),document.body.removeEventListener("touchcancel",this.PRIVATE.bodyClickHandler),document.body.removeEventListener("touchend",this.PRIVATE.bodyClickHandler),this.isOpen&&(this.isOpen=!1)}open(){document.body.addEventListener("click",this.PRIVATE.bodyClickHandler),document.body.addEventListener("touchcancel",this.PRIVATE.bodyClickHandler),document.body.addEventListener("touchend",this.PRIVATE.bodyClickHandler),this.isOpen||(this.isOpen=!0)}inject(e,t,s){this.PRIVATE.sourceEl=t,this.PRIVATE.inputEl=e,this.PRIVATE.inputEl.slot="input",this.PRIVATE.inputEl.id=s,this.appendChild(this.PRIVATE.inputEl),this.PRIVATE.optionsEl=document.createElement("chassis-options"),this.PRIVATE.optionsEl.slot="options",this.appendChild(this.PRIVATE.optionsEl),this.addChildren(t.options)}select(e){let t=this.PRIVATE.getOptionById(e);t&&(t.sourceElement.selected=!0,this.PRIVATE.inputEl.value=t.displayElement.innerHTML,this.PRIVATE.selectedOption=t,this.PRIVATE.options.forEach(e=>e.displayElement.removeAttribute("selected")),t.displayElement.setAttribute("selected",""),this.dispatchEvent(new Event("input",{bubbles:!0})),this.close())}})}();
//# sourceMappingURL=author-datalist.min.js.map
